<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Airbnb & Housing Affordability in NYC</title>
    <link rel="stylesheet" href="css/style.css">
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />

    <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>

    <!-- rj add -->
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="css/style3.css" >
    <!-- js -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <!-- rectbin -->
    <script src="https://cdn.rawgit.com/fabid/d3-rectbin/master/rectbin.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>

    <style type="text/css">
    /* style for chart1 part */

    #tooltip_Chart1.hidden{
      display:none;
    }

    #tooltip_Chart1.hidden{
displaynone;
}

    #tooltip_Chart1{
    position absolute;
    padding 4px;
     bottom 10px;
    background-colorwhite;
    width 140px;
    height 50px;
     opacity 0.6;
    border transparent grey 1px;
     z-index10;

     box-sizing border-box;
     display inline;;
    font-size 14px;
     width100%;
    line-height 1.5;
    color  #e43f5a;
     opacity 0.7;
     content'25BC';
     position absolute;
    text-align center;
    box-shadow 2px 2px 2px grey;
    }

    .hover_Chart1{
    fill  #e43f5a;
    r 8;
    opacity 1;
    }
    .normal_Chart1{
    fillwhite;
    }
    .axis text {
    font 9px sans-serif;
    color #e43b59;
    }
    .axis path,
    .axis line {
    fill none;
    stroke #1f4068;
    shape-rendering crispEdges;
    }


    /* style for matrix part */
    .matrix_circle1{
      fill: grey;
      /* opacity:0; */
      transition: opacity 0.8s;
      -webkit-transition: opacity 0.8s;
    }

    .matrix_circle2{
      fill: #e43f5a;
    }
    .axis text {
        font: 9px sans-serif;
       color: #e43b59;
      }
      .axis path,
      .axis line {
       fill: none;
       stroke: white;
       shape-rendering: crispEdges;
      }


    </style>

</head>
<body>

    <!------------------Intro Section------------------------->

    <section class='first_Section'>
        <img  class='cover' src='pic/cover.png'>
        <br><br>
        <h1 class='title' style='margin-left: 100px;'> Airbnb and </h1>
        <h1 class='title' style='float:right; margin-right: 200px; padding-top: 0px;'>Housing Afforability</h1>
    </section>

    <!------------------chart1------------------------->
    <section class="Intro">
        <div class="content">
            <div class="Intro_text">
                <h1 style="color:white; font-size:3.5em">AIRBNB'S FAST GROWTH</h1>
                <h2 style="color:#e43b59">Airbnb’s number has grown dramatically in the past years in the New York City</h2>
            </div>
            <div class="pic">
              <div id = "chart1">
            <div id = "tooltip_Chart1" class = "hidden">

                  <span id = "chart1_value">100</span>
                  <script>
                    // script for Chart1 part
                      var dataset = [[2008,35],[2009,458],[2010,1558],[2011,4513],[2012,9868],[2013,16337],[2014,24814],[2015,33779],[2016,41145],[2017,46456],[2018,50960]]

                      var width = 650;
                      var height = 400;

                      var padding = { top: 80, right: 80, bottom: 80, left: 80 };

                      var xScale = d3.scaleLinear()
                                    .domain([new Date(2008), new Date(2018)])
                                    .range([0, width - padding.left - padding.right]);
                      var yScale = d3.scaleLinear()
                                    .domain([0, 55000])
                                    .range([height - padding.top - padding.bottom, 0]);

                      var svg = d3.select("div#chart1")
                                  .append('svg')
                                  .attr('width', width + 'px')
                                  .attr('height', height + 'px');

                      var xAxis = d3.axisBottom()
                                    .scale(xScale)
                                    .tickFormat(d3.format("d"))
                                    // .attr("stroke","#1f4068")

                      var yAxis = d3.axisLeft()
                                    .scale(yScale);

                      svg.append('g')
                        .attr('class', 'axis')
                        .attr('transform', 'translate(' + padding.left + ',' + (height - padding.bottom) + ')')
                        .call(xAxis);
                      svg.append('g')
                        .attr('class', 'axis')
                        .attr('transform', 'translate(' + padding.left + ',' + padding.top + ')')
                        .call(yAxis);

                      svg.append("text")
                            .attr("class", "titlestyling")
                            .text("Airbnb Growth in NYC 2008-2018")
                            .attr("text-anchor","middle")
                            .attr("x", "320")
                            .attr("y", "50")
                            .attr("fill", "#e43f5a")
                            .attr("font", "Arial")
                            .attr("font-size", 20);

                      svg.append("text")
                            .text("Listing Count")
                            .attr("text-anchor", "end")
                            .attr("transform", "rotate(-90)")
                            .attr("x", "-140")
                            .attr("y", "20")
                            .attr("fill", "#e43f5a")
                            .attr("font", "Arial")
                            .attr("font-size",14);

                      var linePath = d3.line()
                                      .x(function(d){ return xScale(d[0]) })
                                      .y(function(d){ return yScale(d[1]) });

                      svg.append('g')
                              .append('path')
                              .attr('class', 'line-path')
                              .attr('transform', 'translate(' + padding.left + ',' + padding.top + ')')
                              .attr('d', linePath(dataset))
                              .attr('fill', 'none')
                              .attr('stroke-width', 3)
                              .attr('stroke', 'white');

                              svg.append('g')
                              .selectAll('circle')
                              .data(dataset)
                              .enter()
                              .append('circle')
                              .attr('r', 4)
                              .attr('transform', function(d){
                                return 'translate(' + (xScale(d[0]) + padding.left) + ',' + (yScale(d[1]) + padding.top) + ')'
                              })
                              .attr('fill', 'white')


                              // add hovering tooltip
                              .on("mouseover", function(d){
                                d3.select("#tooltip_Chart1")
                                .style("left", (d3.event.pageX -10) + "px")
                                .style("top", (d3.event.pageY -1100) + "px")
                                .select("#chart1_value")
                                .html("Year: " + String(d[0]) + "<br>" + "Airbnb Listings: " + String(d[1]))

                                d3.select(this).attr("class","hover_Chart1")

                                d3.select("#tooltip_Chart1").classed("hidden", false)

                              })

                                .on("mouseout", function(){
                                  d3.select("#tooltip_Chart1").classed("hidden",true)
                                  d3.select(this).attr("class","normal_Chart1")
                                })
                  </script>
                </div>
            </div>
        </div>
    </section>



    <!------------------chart2------------------------->
    <section class="Intro">
        <div class="content">
            <div class="Intro_text">
                <h1 style="color:white; font-size:3.5em">DISPLACED LONG-TERM RENTAL UNITS</h1>
                <h2 style="color:#e43b59">
                    The affordable long-term rental units were displaced by the growing airbnb units
                    <br><br>According to the report of Airbnb, between 2011 and 2017, New York City
                    <span style ="color:white">lost nearly 183,000 affordable units</span>
                    of housing which were renting for less than $1,000, which accounts for around <span style ="color:white">40%</span> of the total number
                </h2>
            </div>
            <div class="pic">
                <img class="chart_pic" src="pic/chart2.png" width="900px" height="600px">
            </div>
        </div>
    </section>
    <!-- <section class="Intro">
        <div class="content">
          <div class="Intro_text">
              <h2>
                  Not all housing units removed from the long-term market were fully occupied.
                  <span>Only 38%</span>
                  Percent of revenue to hosts renting unit(s) for
                  <span>more than half the year.</span>
              </h2>
          </div>


        </div>
    </section> -->


    <!------------------Chart 3------------------------->
    <!-- <section class="Intro">
        <div class="content">
            <div class="Intro_text">
                <h2>
                    Not all housing units removed from the long-term market were fully occupied.
                    <span>Only 38%</span>
                    Percent of revenue to hosts renting unit(s) for
                    <span>more than half the year.</span>
                </h2>
            </div>
            <div class="pic">
                <img class="chart_pic" src="pic/chart3.png">
            </div>
        </div>
    </section> -->

    <section class="Intro">
        <div class="content">
            <div class="Intro_text">
              <h1 style="color:white; font-size:3.5em">LARGE AMOUNT OF VACANT AIRBNBS</h1>
              <h2 style="color:#e43b59">
                  However, not all the housing units transferred to the Airbnb market have been used effectively<br>
                  <br>From 2015 to 2018, the number of vacant Airbnb had grown quickly
              </h2>
            </div>
            <div class="pic3">
                <h2 id="chart3_des" style='color:white'>Hover to show number of units in each grid</h2>
                <p style='color:white'>*Vacancy Rate = Days Available on the Airbnb Platform / 365</p>
                <div id="Test"></div>
                <div id="sliderContainer">
                    <input id="timeslide" type="range" min="0" max="3" value="3" step="1"/><br>
                    <span id='range'>2018</span>
                </div>
                <div id="chart3"><script type="text/javascript" src="js/3_chart.js"> </script></div>


                <!-- <img class="chart_pic" src="pic/chart3.png"> -->
            </div>
        </div>
    </section>
    <!------------------d3_map Section1------------------------->
    <section class="Intro">
        <div class="content">
            <div class="Intro_text" style="position:absolute; margin-top:50px; width:50%">
                <h1 style="color:white; font-size:3.5em">VACANT <br> AIRBNB </h1>
                <div>
                    <div style="color:#e43b59">
                    <h2 style="color:#e43b59">In 2018, among all 48853 Airbnb listings:<br> A large number </span> of them are vacant for longer than 60%</span> days of the year </span> </div>
                    <p style="color:white"> Percentage of Vacant Days
                </h2></div>
                <button class="filter_circle" id="0" style="background-color: #083472"> 0% - 20%</button>
                <button class="filter_circle" id="0.2" style="background-color: #1059a1"> 20% - 40%</button>
                <button class="filter_circle" id="0.4" style="background-color: #3c8bc3"> 40% - 60%</button>
                <button class="filter_circle" id="0.6" style="background-color: #82bbdb"> 60% - 80%</button>
                <button class="filter_circle" id="0.8" style="background-color: #ddeaf6"> 80% - 100% </button>
            </div>
            <div class="main"></div>
        </div>
    </section>
    <div style="height:200px"></div>

    <!------------------d3_map Section2------------------------->
    <section class="Intro">
        <div class="content">
            <div class="Intro_text" style="position:absolute; margin-top:50px; width:50%">
                <h1 style="color:white; font-size:3.5em">HOUSING <br>AFFORDABILITY</h1>
                <p style="font-size:0.9em; color: white;">Percentage of People Whose Rents Account For More Than 30% Percent of Their Income</p>
                <div id="legend"></div>

                <button class="filter_path" id="all" style="background-color: #ffffff;">All</button>
                <button class="filter_path" id="0" style="background-color: #ffc0b9">0 - 30%</button>
                <button class="filter_path" id="33" style="background-color: #fb4a4a">30% - 60%</button>
                <button class="filter_path" id="66" style="background-color: #ad0007">50% - 90%</button>
            </div>
            <div id="map_afford"></div>
        </div>
    </section>
    <div style="height:200px"></div>


    <!------------------Mapbox Section------------------------->
    <section class="Intro">
        <div id='map'>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <h1 align = "center" style="font-size:3.5em; color: white;">MAPPING AFFORDABILITY WITH VACANCY HEATMAP</h1>
        <p align="center"><iframe src="swipemap.html" style="border:none; width: 99%; height: 1000px"></iframe></p>
        </div>
    </section>



    <div id="set_height"></div>

    <!-- Load JS libraries: jQuery, bootstrap, D3 -->
    <!--<script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/topojson.v2.min.js"></script>
    <script src="js/d3-scale-chromatic.v1.min.js"></script>-->
    <script src="js/main.js"></script>


</body>
</html>
